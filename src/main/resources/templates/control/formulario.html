<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="recursos/meta.html"></div>
    <title>Formulario Control</title>
</head>
<body>
<div th:replace="recursos/aside"></div>
<main class="w-full md:w-[calc(100%-256px)] md:ml-64 bg-gray-200 min-h-screen transition-all main">
    <div th:replace="recursos/navbar.html"></div>
    <div class="p-2 md:p-6 lg:p-8">
        <div class="bg-white rounded-2xl shadow-xl max-w-4xl mx-auto">
            <div class="p-4 md:p-6 lg:p-8">
                <h2 class="text-3xl font-bold text-center text-blue-800 mb-8" th:text="${control.id == null ? 'Controlar' : 'Editar Control'}"></h2>

                <form th:action="@{/control/guardar}" th:object="${control}" method="post" enctype="multipart/form-data" class="space-y-8">
                    <input type="hidden" th:field="*{id}"/>

                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Usuario -->
                        <div>
                            <label for="usuario" class="block mb-2 text-sm font-medium text-blue-700">Usuario</label>
                            <div class="relative">
                                <select th:field="*{usuario.id}" id="usuario" class="w-full pl-11 pr-4 py-3 border-2 rounded-xl bg-white text-sm
                                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                    <option th:each="usuario : ${usuarios}"
                                            th:text="${usuario.nombre} + ${usuario.apellido}"
                                            th:value="${usuario.id}"
                                            th:selected="${usuario.id == control.usuario.id}"
                                    ></option>
                                </select>

                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-blue-500 pointer-events-none"
                                     xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                            </div>
                        </div>

                        <!-- Fecha Registro -->
                        <div>
                            <label for="fecha" class="block mb-2 text-sm font-medium text-blue-700">Fecha Registro</label>
                            <div class="relative">
                                <input id="fecha" type="date" th:field="*{fechaRegistro}"
                                       class="w-full pl-11 pr-4 py-3 border-2 rounded-xl bg-white text-sm
                                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-blue-500 pointer-events-none"
                                     xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                            </div>
                            <p class="text-sm text-red-600 mt-1" th:if="${#fields.hasErrors('fechaRegistro')}" th:errors="*{fechaRegistro}"></p>
                        </div>

                        <!-- Hora Inicio -->
                        <div>
                            <label for="horaInicio" class="block mb-2 text-sm font-medium text-blue-700">Hora Inicio</label>
                            <div class="relative">
                                <input id="horaInicio" type="time"
                                       th:field="*{horaInicio}"
                                       class="w-full pl-11 pr-4 py-3 border-2 rounded-xl bg-white text-sm
                                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-blue-500 pointer-events-none"
                                     xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 21C16.97 21 21 16.97 21 12S16.97 3 12 3 3 7.03 3 12s4.03 9 9 9Z"/>
                                    <path d="M12 6v6l4.24 4.24"/>
                                </svg>
                            </div>
                            <p class="text-sm text-red-600 mt-1" th:if="${#fields.hasErrors('horaInicio')}" th:errors="*{horaInicio}"></p>
                        </div>

                        <!-- Hora Fin -->
                        <div>
                            <label for="horaFin" class="block mb-2 text-sm font-medium text-blue-700">Hora Finalización</label>
                            <div class="relative">
                                <input id="horaFin" type="time"
                                       th:field="*{horaFin}"
                                       class="w-full pl-11 pr-4 py-3 border-2 rounded-xl bg-white text-sm
                                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-blue-500 pointer-events-none"
                                     fill="#2563eb" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M12,6a1,1,0,0,0-1,1v5a1,1,0,0,0,.293.707l3,3a1,1,0,0,0,1.414-1.414L13,11.586V7A1,1,0,0,0,12,6Z
                                M23.812,10.132A12,12,0,0,0,3.578,3.415V1a1,1,0,0,0-2,0V5a2,2,0,0,0,2,2h4a1,1,0,0,0,0-2H4.827
                                a9.99,9.99,0,1,1-2.835,7.878A.982.982,0,0,0,1,12a1.007,1.007,0,0,0-1,1.1,12,12,0,1,0,23.808-2.969Z"/>
                                </svg>
                            </div>
                            <p class="text-sm text-red-600 mt-1" th:if="${#fields.hasErrors('horaFin')}" th:errors="*{horaFin}"></p>
                        </div>
                        <input type="hidden" th:field="*{minutosUtilizados}"/>
                    </div>

                    <!-- Botón -->
                    <div class="flex justify-center gap-4">

                            <button type="button" onclick="history.back()" class="w-3/5 flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                                </svg>
                                Volver
                            </button>

                        <button type="submit"
                                class="group relative inline-flex h-12 w-3/5 items-center justify-center overflow-hidden rounded-md bg-blue-600 px-6 font-medium text-white duration-500">
                            <div class="translate-y-0 transition group-hover:-translate-y-[150%] ">
                                <span th:text="${control.id == null ? 'Registrar Control' : 'Actualizar Control'}"></span>
                            </div>
                            <div class="absolute translate-y-[150%] transition group-hover:translate-y-0 ">
                                <svg width="20" height="20" viewBox="0 0 15 15" fill="none"
                                     xmlns="http://www.w3.org/2000/svg" class="h-6 w-6">
                                    <path d="M7.5 2V13M2 7.5H13" stroke="currentColor" stroke-width="2"
                                          stroke-linecap="round"/>
                                </svg>
                            </div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
<script th:src="@{/js/main.js}"></script>

</body>
</html>